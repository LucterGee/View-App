### 当前版本


version:0.5.1  date:2023-04-25

* 更新信息在下文

----

#### 说明
* 版本计划及当前版本
* 高度的可拓展性是一个框架重要功能之一

#### 当前版本的控件及功能列举

| 序号    | 功能     | 对应名         | 描述              | 完成状态           | 备注                                       |
|-------|--------|-------------|-----------------| ------------------ |------------------------------------------|
| 1     | 应用     | Application | 整个应用的状态管理       | 完成               |                                          |
| 2     | 键盘     | Keyboard    | 键盘交互            | 完成               |                                          |
| 3     | 页面     | Page        | 单个页面的状态管理       | 完成               |                                          |
| 4     | 页面管理员  | PageManager | 管理多个页面的         | 基本功能           |                                          |
| 5     | 基础控件   | View        | 和节点交互           | 完成               | 后续需要分离节点交互和无关节点的相关操作                     |
| 6     | 控件管理员  | ViewManager | 管理View的         | 基本完成           | 内部的buildView方法耦合在这里，不易拓展                 |
| 7     | 可上焦控件  | ItemView    | 可以上焦的控件，基本的交互   | 完成               | View子类，包含上焦效果、监听、点击                      |
| 8     | 滚动控件   | ScrollView  | 滚动控件            | 完成               | 内含滚动器，功能正常，但实现方式不佳，待优化                   |
| 9     | 图片控件   | ImageView   | 主要是懒加载          | 完成               | 主要在渲染后滚动后判断是否需要加载，一般是配合ScrollView        |
| 10    | 文本控件   | TextView    | 主要是跑马灯          | 完成               | 横向和纵向跑马灯                                 |
| 11    | 组控件    | GroupView   | 主要是给可上焦的控件分组    | 完成               | 在组内有对应的就近原则                              |
| 12    | 弹窗控件   | Dialog      | 浮在页面的弹窗         | 完成               |                                          |
| 13    | 帧控件    | FrameView   | 主要是包含碎片Fragment | 完成               |                                          |
| 14    | 碎片     | Fragment    | 碎片，动态加载，有生命周期   | 完成               | 需要配合FrameView使用                          |
| 15    | 播放器    | VideoPlayer | 播放器空实现          | 完成 | 内部实现逻辑，但需要与实际播放器进行交互，实际播放器需要继承RealPlayer |
| 16    | 播放器控件  | PlayerView  | 使用布局来自动定位及使用宽高  | 基本完成，但未测试 | 还停留在业务层，待完善后移动至框架层                       |
| 17    | 数据保存   | LocalData   | 保存数据的工具         | 完成               | 使用json格式保存，json所需空间偏大，容易出现cookie长度不够问题   |
| 18    | 单独弹窗控件 | LoneDialog  | 可独立布局及编辑的弹窗     | 完成               | 对应的布局及                                   |
| 19    | 提示空间   | Toast       | 在页面上显示消息        | 完成               | 显示一定时间会自动消失                              |

#### 0.1.0 基本功能

* 在该版本中，基本功能已完成，对于实际开发基本满足要求，部分功能可以在简单变形之后实现
* 开始积累special_view，和业务结合较为紧密的控件，新的属性也需要支持标签
* 虚拟节点优化，在后续版本中需要调研，得到对性能提升程度

使用方式可以参考README.md，也可以参考src实现的demo
#### 0.1.1 findViewById改写，控件向内部迭代到有id对应的控件

* 把控件绑定在viewManager的map中，不利于控件的特殊操作 

#### 0.2.0 拓展组件-可循环列表RecycleView

* 节点可循环使用
* 滚动效果循环

| 序号 | 功能     | 对应名      | 描述     | 完成状态 | 备注                        |
| ---- | -------- | ----------- | -------- | -------- | --------------------------- |
| 1    | 循环列表 | RecycleView | 列表控件 | 完成     | 使用adapter来创建每一个元素 |

#### 0.2.1 dialog组件布局分离，规范组件的自定义布局形式,并完善已知问题（缺陷）

* 将布局文件等同于page
* css和html文件可以使用文件夹区分，在loader中处理
* 尝试将html和css写在一个文件中，更加清晰的关联布局和样式
* RecycleView默认设置adapter，加载标签属性，默认上焦，focusable也需要加入
* 新增气泡控件，是否可以看作自动消失的dialog

##### 0.2.2 完善各个组件标签属性

* 除了基础属性之外的属性还没有写
* GroupView、RecycleView等

##### 0.2.3 替换Map类，及修复一些问题

* 将Map替换为VMap（自定义类），避免出现Map不适配
* 修复0.2.2中属性获取配置后设置错误

##### 0.2.4 将播放器耦合进Page/Fragment中

* 不同Page或Fragment的Player对应的监听所在位置是不同的，需要触发各自的事件

##### 0.2.5 解决初始焦点问题

* 在使用fragment时，初始焦点在fragment中，需要在业务层特殊处理
* 当应用跳转到外部返回时，使用page的param获取焦点id，恢复

#### 0.3.0 拓展组件-Toast组件

* 继承可以自定义，任意地方可调用、显示位置
* 时间可设定
* 样式可调整（可使用template布局）
* 并开始支持只带布局的组件

#### 0.3.1 html loader优化

* 解析tagName，将tagName解析到属性中的view-type
* 解析id，将id解析到属性中view-id
* 可以使用buildView方法和loader结合的方式

#### 0.3.2 盒子兼容

* 引入@babel/polyfill，兼容新api在编译过程中无法处理
* 优化打包，在打包之前，删除老的文件，并且不使用箭头函数

#### 0.4.0 页面配置

* 在view.config.js中配置及注册页面

```javascript
  /**
   * 定义PageName对应的Page，舍去在Page子类中赋值pageName步骤
   */
  export var PageConfig = {
            "HomePage": HomePage,
            "ListPage": ListPage,
            "FramePage": FramePage,
            "TestPage": TestPage,
            "PlayerPage": PlayerPage
          }
  
  /**
   * 默认的page
   * 当未获取到第一个页面时，会使用该页面
   * @type {string}
   */
  export var LaunchPage = "HomePage";
```

#### 0.4.1 优化运行及打包配置

* 在打包中不需要切换运行环境，只需执行不同的命令即可
  * 开发换进
  ```
  npm run build-dev
  ```
  * 生产环境
  ```
  npm run build
  或
  npm run start
  或
  npm run build-pro
  ```
  
* 自动识别package.json中的name作为页面标题
* 配置标题icon，在打包中也会带着，路径为./public/VALogo.png

#### 0.5.0 拓展播放器-Android、Web播放器，
使用控件位置来决定播放器位置及宽高

* 对接Android播放器，使用特定关键字调用相关播放方法，实现Android原生和H5交互
* 对接Web播放器(阿里h5播放器)
* 将iptv播放器起到框架之外
* 使用自定义控件形式在业务层添加

#### 0.5.1 将PlayerView移入框架

* 形成自定义控件开发模式

#### 0.5.2 将PlayerView移入框架

* PlayerView作为比较通用的控件，数据框架级别的
* 内部的播放器的对接由业务层处理

#### 0.6.0 优化工具-LocalData优化

这里的LocalData指，网页可以保存的数据，下次进入时可以使用，目前使用cookie来实现

* 新增表单形式（使用"&"连接）保存，需要提供为内部改变为"&"形式的方法
* 尝试storage实现,貌似可靠性有点问题
* 持续在ViewUtil中添加常用（非框架级的）方法

#### 0.7.0 拓展组件-动态生成组件（组件名未定）

* 继承GroupView，使用Adapter生成
* 尝试relative方式布局，兼容性验证

#### 0.8.0 分离View，新增VElement对象(或者工具)

* 虚拟节点可以在这个基础上尝试，vue的虚拟节点只提供判断节点是否复用及创建功能，实际的节点操作还是使用真实节点
* 将节点相关操作及信息单独封装到VElement类中，节点方面的兼容性，可以在这里处理
* 在View内部新增VElement对象(或者工具)，实现相关操作，另外还有控件级操作，包括appendChild(遇到过的问题)

#### 1.0.0 优化组件-使用transform实现滚动

使用top、left实现的滚动存在效率问题，容易出现卡顿，transform是css样式支持，对于效率优化较好，需要尝试及调研

* 新增transform实现，可以支持选择滚动方式

#### 1.1.0 Page跳转动画、组件动画

* page跳转，可以定义放大缩小、平移、淡入之类的动画
* 组件显示动画，dialog

* 图片跑马灯
* 加载提示
* 弹出框
* 返回顶部
* 进度条
* ...

#### 1.2.0 支持鼠标事件、触摸事件

目前存在软终端，这个设备上存在支持触摸的情况；

可以使用鼠标或触摸控制页面，在切换控制方式时，目前会有点问题，比如滚动之后，焦点在屏幕外，此时键盘控制，会滚动回原位置

* 滚轮、触摸滚动后，失去焦点，回到按键时，默认焦点上焦（需要记录默认焦点）
* 鼠标移动到view时，展示上焦效果，离开时，普通效果

#### 开发插件，引入自定义的文件名（例如：.view后缀）

* 形成该框架特定的开发模式



#### 未排版本的需求

* Fragment内部可直接切换：当目标Fragment未创建时，可以先创建；也可以直接调用FrameView的switchTo方法
* 倒计时小组件，提供开始、暂停、结束方法，提供响应的监听
* 打印到屏幕上组件，受环境影响，生产环境默认隐藏
  ```javascript
     var mode = process.env.NODE_ENV || "production";//获取当前的模式,development:开发模式；production：生产模式
  ```
* 添加是否调试模式全局标识，可以判断打印是否默认关闭（State.js）
* ImageView可以有一张默认加载图,加载失败时，也可以显示
  ```html
  <img src="**.png" onerror="func">
  ```
  ```javascript
  var img = new ImagaView(*,*);
  img.ele.on("error",function (){})
  ```
* 支持Fragment里套FrameView
* 纵向FrameView
* 根据数据自动生成页面组件（SoulPainterView），先业务层级别的，然后完善至框架级别的
* 可以加一个断点播放监听（比如返回页面时的继续播放）
* 提供一个回调，给业务层一个入口，从服务端获取页面保存信息，实现重启盒子，也能回到退出页
* RecycleView的margin设置到component内部，用margin撑开component的宽高
* RecycleView的item中，可以填上data对应的key，根据item子view的类型填上对应的数据，在一定程度上不使用自定义的adapter，这里可以参考elementUI的slot（）
    ```html
        <item slot="data">
            <div class="pic"><img src="data.pic"></div>        
        </item>
    ```
  
* 返回页面时（一般是指cookie中有页面记录时），提供回调方法是否需要需要恢复，怎么恢复，或怎么处理，在Application调用，MyApplication中实现
* 对接android浏览器及播放器
* 页面跳转，新增路由模式#（待评估）
* 整一个公众号来回答疑问，和版本、消息的发布
* 跳转到外部地址或者退出app时，可以设置跳转延迟，便于在跳转之前执行一些异步动作
* 在git上创建一个空项目（类似Hello World），便于项目的新建，该空项目包含view的代码及配置，还有一些必要的项目结构文件夹及文件
* 编写一个类似vue的在线网站，为这个网站申请一个域名
